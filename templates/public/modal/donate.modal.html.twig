{% extends 'public/modal/base.html.twig' %}
{% set classes = 'kudos_form_modal' %}
{% set premium = false %}

{% block header %}
    {{ header }}
{% endblock header %}

{% block text %}
{% endblock text %}

{% block footer %}

    <form class="kudos_form" action="">

        {{ nonce|raw }}
        <input required name="return_url" type="hidden" value="{{ return_url }}">
        <input required name="donation_label" type="hidden" value="{{ donation_label }}">

        <div class="form-tabs">

            {#   INITIAL FIELDS   #}
            <fieldset class="form-tab form-tab-initial current-tab">
                <p class="kudos_modal_text">{{ text }}</p>

                {% if amount.type != 'open' %}
                    <div class="kudos_amounts">
                        {% for key,value in amount.fixed_values %}
                            <div class="kudos_radio_amount">
                                <input id="amount-{{ modal_id }}-{{ key }}" {{ key==0 ? 'checked' : '' }} type="radio" name="value" value={{ value }} />
                                <label for="amount-{{ modal_id }}-{{ key }}">€{{ value }}</label>
                            </div>
                        {% endfor %}
                    </div>
                {% endif %}

                {% if amount.type != 'fixed' %}
                    <label>
                        <input required type="text" min="1" name="value" data-type='currency' placeholder="{{ __('Amount', 'kudos-donations')}} (€) *" />
                    </label>
                {% endif %}

                <label>
                    <input required type="text" name="name" placeholder="{{ __('Name', 'kudos-donations') }} *" />
                </label>
                <label>
                    <input required type="email" name="email_address" placeholder="{{ __('E-mail address', 'kudos-donations') }} *" />
                </label>
                <label class="not-full">
                    <input required checked type="radio" name="payment_frequency" value="oneoff" />
                    {{ __('One-off', 'kudos-donations') }}
                </label>
                <label class="not-full">
                    <input type="radio" name="payment_frequency" value="recurring" />
                    {{ __('Recurring', 'kudos-donations') }}
                </label>
                <div class="kudos_modal_buttons" style="text-align: center">
                    <button class="button-style-outline kudos_button" type="button" data-micromodal-close aria-label="{{ __('Cancel', 'kudos-donations') }}">{{ __('Cancel', 'kudos-donations') }}</button>
                    <button class="kudos_button kudos_form_nav" data-direction="next" type="button" aria-label="{{ __('Next', 'kudos-donations') }}">{{ __('Next', 'kudos-donations') }}</button>
                </div>
            </fieldset>

            {#   PAYMENT FREQUENCY TAB   #}
            <fieldset class="form-tab form-tab-frequency" data-requirements='{"payment_frequency":"recurring"}'>
                <p class="kudos_modal_text">How often would you like to donate?</p>
                <label>
                    <select required name="recurring_frequency">
                        <option value="" disabled selected>Payment frequency</option>
                        <option value="12 months">{{ __('Yearly', 'kudos-donations') }}</option>
                        <option value="3 months">{{ __('Quarterly', 'kudos-donations') }}</option>
                        <option value="1 month">{{ __('Monthly', 'kudos-donations') }}</option>
                    </select>
                </label>
                <label>
                    <select required name="recurring_length">
                        <option value="" disabled selected>{{ __('Donation duration', ' kudos-donations') }}</option>
                        <option value="0">{{ __('Continuous', 'kudos-donations')}}</option>
                        <option value="1">1 {{ __('Year', 'kudos-donations')}}</option>
                        <option value="2">2 {{ __('Years', 'kudos-donations')}}</option>
                        <option value="3">3 {{ __('Years', 'kudos-donations')}}</option>
                        <option value="4">4 {{ __('Years', 'kudos-donations')}}</option>
                        <option value="5">5 {{ __('Years', 'kudos-donations')}}</option>
                        <option value="6">6 {{ __('Years', 'kudos-donations')}}</option>
                        <option value="7">7 {{ __('Years', 'kudos-donations')}}</option>
                        <option value="8">8 {{ __('Years', 'kudos-donations')}}</option>
                        <option value="9">9 {{ __('Years', 'kudos-donations')}}</option>
                        <option value="10">10 {{ __('Years', 'kudos-donations')}}</option>
                    </select>
                </label>
                <div class="kudos_modal_buttons" style="text-align: center">
                    <p class="kudos_form_nav kudos_back" data-direction="back"></p>
                    <button class="button-style-outline kudos_button" type="button" data-micromodal-close aria-label="{{ __('Cancel', 'kudos-donations') }}">{{ __('Cancel', 'kudos-donations') }}</button>
                    <button class="kudos_button kudos_form_nav" data-direction="next" type="button" aria-label="{{ __('Next', 'kudos-donations') }}">{{ __('Next', 'kudos-donations') }}</button>
                </div>
            </fieldset>

            {#   TAX AGREEMENT TAB   #}
            {% if(premium) %}
            <fieldset class="form-tab form-tab-tax" data-requirements='{"recurring_length": ["0", "5", "6", "7", "8", "9", "10"] }'>
                <p class="kudos_modal_text">Do you want a tax deduction agreement?</p>
                <div class="kudos_input_group">
                    <label>
                        {{ __('Yes', 'kudos-donations') }}
                        <input required type="radio" name="tax_deduction" value="true" />
                    </label>
                    <label>
                        {{ __('No', 'kudos-donations') }}
                        <input checked type="radio" name="tax_deduction" value="false" />
                    </label>
                </div>
                <div class="kudos_modal_buttons" style="text-align: center">
                    <p class="kudos_form_nav kudos_back" data-direction="back"></p>
                    <button class="button-style-outline kudos_button" type="button" data-micromodal-close aria-label="{{ __('Cancel', 'kudos-donations') }}">{{ __('Cancel', 'kudos-donations') }}</button>
                    <button class="kudos_button kudos_form_nav" data-direction="next" type="button" aria-label="{{ __('Next', 'kudos-donations') }}">{{ __('Next', 'kudos-donations') }}</button>
                </div>
            </fieldset>
            {% endif %}

            {#   ADDRESS TAB   #}
            {% if(address.enabled) %}
            <fieldset class="form-tab form-tab-address">
                <p class="kudos_modal_text">{{__('Please fill in you address', 'kudos-donations')}} {{ address.required ? null : '(' ~ __('optional', 'kudos-donations') ~ ')' }}</p>
                <label>
                    <input {{ address.required ? 'required' : null }} type="text" name="street" placeholder="{{ __('Street', 'kudos-donations') }} {{ address.required ? '*' : null }}" />
                </label>
                <label>
                    <input {{ address.required ? 'required' : null }} type="text" name="postcode" placeholder="{{ __('Postcode', 'kudos-donations') }} {{ address.required ? '*' : null }}" />
                </label>
                <label>
                    <input {{ address.required ? 'required' : null }} type="text" name="city" placeholder="{{ __('City', 'kudos-donations') }} {{ address.required ? '*' : null }}" />
                </label>
                <label>
                    <input {{ address.required ? 'required' : null }} type="text" name="country" placeholder="{{ __('Country', 'kudos-donations') }} {{ address.required ? '*' : null }}" />
                </label>
                <div class="kudos_modal_buttons" style="text-align: center">
                    <p class="kudos_form_nav kudos_back" data-direction="back"></p>
                    <button class="button-style-outline kudos_button" type="button" data-micromodal-close aria-label="{{ __('Cancel', 'kudos-donations') }}">{{ __('Cancel', 'kudos-donations') }}</button>
                    <button class="kudos_button kudos_form_nav" data-direction="next" type="button" aria-label="{{ __('Next', 'kudos-donations') }}">{{ __('Next', 'kudos-donations') }}</button>
                </div>
            </fieldset>
            {% endif %}

            {#   FINAL TAB   #}
            <fieldset class="form-tab form-tab-final">
                <p class="kudos_modal_text">{{ __('By clicking donate you agree to the following payment', 'kudos-donations') }}: </p>
                <div class="kudos_summary text-left">
                    <p class="mb-0"><strong>{{ __('Name', 'kudos-donations') }}: </strong><span class="summary_name"></span></p>
                    <p class="mb-0"><strong>{{ __('Email', 'kudos-donations') }}: </strong><span class="summary_email"></span></p>
                    <p class="mb-0"><strong>{{ __('Amount', 'kudos-donations') }}: </strong>€<span class="summary_value"></span></p>
                    <p><strong>{{ __('Type', 'kudos-donations') }}: </strong><span class="summary_frequency"></span></p>
                </div>
                <label>
                    <input required type="checkbox" name="avg" value="true" />
                    {{ privacy_link | raw }}
                </label>
                <div class="kudos_modal_buttons" style="text-align: center">
                    <p class="kudos_form_nav kudos_back" data-direction="back"></p>
                    <button class="button-style-outline kudos_button" type="button" data-micromodal-close aria-label="{{ __('Cancel', 'kudos-donations') }}">{{ __('Cancel', 'kudos-donations') }}</button>
                    <button name="kudos_submit" class="kudos_submit kudos_button" type="submit" aria-label="{{ __('Donate', 'kudos-donations') }}">{{ __('Donate', 'kudos-donations') }}</button>
                </div>
            </fieldset>
        </div>
    </form>

{% endblock footer %}
